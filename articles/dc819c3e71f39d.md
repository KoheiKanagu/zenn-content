---
title: "TextFieldãŒå«ã¾ã‚Œã¦ã„ã‚‹CheckboxListTileã®Widgetãƒ†ã‚¹ãƒˆã§ãƒãƒã£ãŸè©±"
emoji: "ğŸ¤¯"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [flutter]
published: true
---

![äºŒã¤ã®ListTileã®å‹•ä½œ](https://storage.googleapis.com/zenn-user-upload/6678596374d5-20250304.gif)
_äºŒã¤ã® `CheckboxListTile` ã®å‹•ä½œ_

ã“ã®ã‚ˆã†ãª`CheckboxListTile`ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒã‚ã£ãŸã¨ã—ã¾ã™ã€‚

ä¸€ã¤ã¯ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¨ãƒ†ã‚­ã‚¹ãƒˆãŒã‚ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ã§ã™ã€‚

ã‚‚ã†ä¸€ã¤ã¯ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚ªãƒ³ã«ã™ã‚‹ã¨`TextField`ãŒæœ‰åŠ¹ã«ãªã‚Šã€ãƒ†ã‚­ã‚¹ãƒˆãŒå…¥åŠ›ã§ãã‚‹ä»•æ§˜ã§ã™ã€‚
ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ã‚ˆã†ãªç”»é¢ã§ã€"ãã®ä»–"ã‚’é¸æŠã™ã‚‹ã¨ãƒ•ãƒªãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã§å…¥åŠ›ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

https://dartpad.dev/?run=true&id=60166109704733995b2307b2bdd66b55

ã§ã¯ã“ã®`CheckboxListTile`ã‚’ã‚¿ãƒƒãƒ—ã—ãŸæ™‚ã€ã¡ã‚ƒã‚“ã¨ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãŒã‚ªãƒ³ã‚ªãƒ•ã«å¤‰åŒ–ã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

## é­é‡ã—ãŸå•é¡Œ

ã¾ãšä¸€ã¤ç›®ã®ã‚·ãƒ³ãƒ—ãƒ«ãª`CheckboxListTile`ã®ãƒ†ã‚¹ãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚
ãƒ†ã‚¹ãƒˆã¯æˆåŠŸã—ã¾ã™ã€‚

```dart
testWidgets("CheckboxListTileãŒã‚ªãƒ³ã‚ªãƒ•ã§ãã‚‹ã“ã¨", (tester) async {
  await tester.pumpWidget(MyApp());

  final tileFinder = find.byKey(ValueKey("checkbox_list_tile"));

  // åˆæœŸå€¤ã¯false
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isFalse);

  // ã‚¿ãƒƒãƒ—
  await tester.tap(tileFinder);
  await tester.pumpAndSettle();

  // å€¤ãŒtrueã«ãªã‚‹
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isTrue);

  // ã‚¿ãƒƒãƒ—
  await tester.tap(tileFinder);
  await tester.pumpAndSettle();

  // å€¤ãŒfalseã«ãªã‚‹
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isFalse);
});
```

ç¶šã„ã¦`TextField`ãŒå«ã¾ã‚Œã¦ã„ã‚‹`CheckboxListTile`ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ãªã‚“ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã€‚ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’**ã‚ªãƒ•**ã«ã™ã‚‹æ“ä½œã‚’ã—ã¦ã‚‚ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®å€¤ãŒå¤‰ã‚ã‚‰ãšã€ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã™ã€‚

```dart
testWidgets("TextFieldä»˜ãã®CheckboxListTileãŒã‚ªãƒ³ã‚ªãƒ•ã§ãã‚‹ã“ã¨", (tester) async {
  await tester.pumpWidget(MyApp());

  final tileFinder = find.byKey(
    ValueKey("checkbox_list_tile_with_text_field"),
  );

  // åˆæœŸå€¤ã¯false
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isFalse);

  // ã‚¿ãƒƒãƒ—
  await tester.tap(tileFinder);
  await tester.pumpAndSettle();

  // å€¤ãŒtrueã«ãªã‚‹
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isTrue);

  // ã‚¿ãƒƒãƒ—
  await tester.tap(tileFinder);
  await tester.pumpAndSettle();

  // **å€¤ãŒfalseã«ãªã‚‰ãªã„**
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isFalse);
});
```

## è§£æ³•

ã‚¿ãƒƒãƒ—ã™ã¹ããªã®ã¯`CheckboxListTile`ã§ã¯ãªãã€ãã®ä¸­ã«å«ã¾ã‚Œã‚‹`Checkbox`ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã§ã™ã€‚
[`find.descendant`](https://api.flutter.dev/flutter/flutter_test/CommonFinders/descendant.html)ã‚’ä½¿ã£ã¦ã€`CheckboxListTile`ã®å­ã®`Checkbox`ã‚’è¦‹ã¤ã‘ã¦ã‚¿ãƒƒãƒ—ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

```diff
testWidgets("TextFieldä»˜ãã®CheckboxListTileãŒã‚ªãƒ³ã‚ªãƒ•ã§ãã‚‹ã“ã¨", (tester) async {
  await tester.pumpWidget(MyApp());

  final tileFinder = find.byKey(
    ValueKey("checkbox_list_tile_with_text_field"),
  );

+  final checkboxFinder = find.descendant(
+    of: tileFinder,
+    matching: find.byType(Checkbox),
+  );

  // åˆæœŸå€¤ã¯false
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isFalse);

  // ã‚¿ãƒƒãƒ—
-  await tester.tap(tileFinder);
+  await tester.tap(checkboxFinder);
  await tester.pumpAndSettle();

  // å€¤ãŒtrueã«ãªã‚‹
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isTrue);

  // ã‚¿ãƒƒãƒ—
-  await tester.tap(tileFinder);
+  await tester.tap(checkboxFinder);
  await tester.pumpAndSettle();

  // å€¤ãŒfalseã«ãªã‚‹
  expect(tester.widget<CheckboxListTile>(tileFinder).value, isFalse);
});
```

## åŸå› 

ã©ã†ã‚„ã‚‰`CheckboxListTile`ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã„ã‚‹ã¤ã‚‚ã‚Šã§ã—ãŸãŒã€ãã®ä¸­ã®`TextField`ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã„ã‚‹æ‰±ã„ã¨ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
`FocusNode`ã‚’ã‚»ãƒƒãƒˆã—ã¦ã¿ã‚‹ã¨ã€`TextField`ãŒãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

:::message
`SwitchListTile`ã§ã‚‚åŒæ§˜ã®ç¾è±¡ãŒèµ·ãã‚‹ã®ã§ã€`Switch`ã‚’æ¢ã—ã¦ã‚¿ãƒƒãƒ—ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚
:::

ã¡ã‚ƒã‚“ã¨ç›®çš„ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’æ˜ç¤ºã—ã¦ã‚¿ãƒƒãƒ—ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚ï¼ˆåŠæ—¥å¹ãé£›ã³ã¾ã—ãŸï¼‰
